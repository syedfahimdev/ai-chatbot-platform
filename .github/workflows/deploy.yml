# Generated by syed

name: Deploy AI Chatbot

on:
  push:
    branches: [ main ]
  workflow_dispatch:

jobs:
  deploy:
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout code
      uses: actions/checkout@v4

    - name: Set up Docker Buildx
      uses: docker/setup-buildx-action@v3

    - name: Create .env file
      run: |
        cp env.example .env
        echo "OPENAI_API_KEY=${{ secrets.OPENAI_API_KEY }}" >> .env
        echo "SECRET_KEY=${{ secrets.SECRET_KEY }}" >> .env

    - name: Build and push Docker images
      uses: docker/build-push-action@v5
      with:
        context: .
        file: ./docker-compose.yml
        push: true
        tags: |
          ${{ secrets.DOCKER_USERNAME }}/ai-chatbot-backend:latest
          ${{ secrets.DOCKER_USERNAME }}/ai-chatbot-frontend:latest
        cache-from: type=gha
        cache-to: type=gha,mode=max

    - name: Deploy to server
      if: github.ref == 'refs/heads/main'
      run: |
        echo "Deployment to production server would happen here"
        echo "You can add your deployment logic here"
        echo "For example:"
        echo "- Deploy to AWS ECS"
        echo "- Deploy to Google Cloud Run"
        echo "- Deploy to Azure Container Instances"
        echo "- Deploy to DigitalOcean App Platform"
        echo "- Deploy to Heroku"

    - name: Notify deployment status
      run: |
        echo "‚úÖ Deployment completed successfully!"
        echo "üåê Application should be available at your deployment URL" 